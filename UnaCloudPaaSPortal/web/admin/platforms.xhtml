<ui:composition template="/templates/contextTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="body">
        <h:form>
            <p:dataTable var="v" value="${platformBean.lista}" >
                <p:column headerText="Id">
                    <h:outputText value="${v.id}" />
                </p:column>
                <p:column headerText="Name">
                    <h:outputText value="${v.name}" />
                </p:column>
            </p:dataTable></h:form>
        <p:commandButton ajax="true" value="Add new" icon="ui-icon-plusthick" action="#{platformBean.addNew()}" update="panelEdit"/>
        <p:panel closable="true" id="panelEdit" visible="#{platformBean.currentState!=0}" header="#{platformBean.currentState==1?'Add new platform':'Edit platform'}">
            <h:panelGrid columns="2">
                <h:outputLabel value="Name:" />
                <p:inputText value="#{platformBean.object.name}" />
            </h:panelGrid>
            <p:fieldset legend="Roles" toggleable="true" collapsed="true">
                <p:dataTable id="roltable" value="#{platformBean.object.roles}" var="rol">
                    <p:column headerText="Name">
                        <h:outputText value="${rol.roleName}" />
                    </p:column>
                    <p:column headerText="Multiplicity">
                        <h:outputText value="${rol.multiplicity}" />
                    </p:column>
                </p:dataTable>
                <p:commandButton ajax="true" icon="ui-icon-plusthick" action="#{platformBean.addNew()}" update="roltable"/>
            </p:fieldset>
        </p:panel>
    </ui:define>
</ui:composition>
