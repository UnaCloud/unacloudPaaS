<ui:composition template="/templates/contextTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <ui:param name="titulotab" value="Puppet Modules" />
    <ui:define name="body">
        <p:dialog id="dialogEdit" header="Add new Puppet Module" modal="true" widgetVar="panelAdd" >
            <h:form id="formedit">
                <h:panelGrid columns="3" id="nmtable">
                    <h:outputLabel value="Name:" />
                    <p:inputText id="mname" required="true" requiredMessage="*" value="#{puppetModuleBean.insert.name}" style="width: 200px;"/>
                    <p:message for="mname"/>
                    <h:outputLabel value="Description:" />
                    <p:inputTextarea id="mdesc" required="true" requiredMessage="*" value="#{puppetModuleBean.insert.descripcion}" style="width: 200px;"/>
                    <p:message for="mdesc"/>
                </h:panelGrid>
                <p:commandButton ajax="true" action="#{puppetModuleBean.addParam()}" icon="ui-icon-plusthick" update="params"/>
                <p:dataTable editable="true" editMode="cell" id="params" value="#{puppetModuleBean.insert.parameters}" var="v">
                    <p:column headerText="Param name">
                        <p:cellEditor>  
                            <f:facet name="output"><h:outputLabel value="#{v.name}"/></f:facet>  
                            <f:facet name="input"><p:inputText value="#{v.name}" style="width:96%"/></f:facet>  
                        </p:cellEditor> 
                    </p:column>
                    <p:column headerText="Default value">
                        <p:cellEditor>  
                            <f:facet name="output"><h:outputLabel value="#{v.defaultValue}"/></f:facet>  
                            <f:facet name="input"><p:inputText value="#{v.defaultValue}" style="width:96%"/></f:facet>  
                        </p:cellEditor> 
                    </p:column>
                </p:dataTable>
                <p:spacer height="10px" width="100%"/>
                <p:commandButton value="Acept" action="#{puppetModuleBean.insertModule()}" update=":moduletables,nmtable" style="float: right;"/>
                <p:commandButton value="Cancel" onsuccess="panelAdd.hide();" style="float: right;"/>
            </h:form>
        </p:dialog>
        <p:dataTable id="moduletables" var="v" value="${puppetModuleBean.modules}" >
            <p:column headerText="Name">
                <h:outputText value="${v.name}" />
            </p:column>
            <p:column headerText="Description">
                <h:outputText value="${v.descripcion}" />
            </p:column>
            <p:column headerText="Edit">
                <p:commandButton ajax="true" icon="ui-icon-pencil" action="#{puppetModuleBean.edit(v)}" update=":dialogEdit" oncomplete="panelAdd.show();" />
            </p:column>
        </p:dataTable>
        <p:spacer height="10px" width="100%"/>
        <p:commandButton ajax="true" value="Add new" icon="ui-icon-plusthick" action="#{puppetModuleBean.clear()}" update=":dialogEdit" oncomplete="panelAdd.show();"/>
    </ui:define>
</ui:composition>
